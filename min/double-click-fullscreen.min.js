(()=>{const i=["https://www.bilibili.com/bangumi/","https://www.bilibili.com/video/"];if(!i.some(i=>document.URL.startsWith(i))){return}if(settings.touchVideoPlayer&&settings.touchVideoPlayerDoubleTapControl){Toast.info("在开启了<span>播放器触摸支持-启用双击控制</span>后, <span>双击全屏</span>功能将无效.","提示");settings.doubleClickFullscreen=false;return}Observer.videoChange(async()=>{await SpinQuery.unsafeJquery();const i=await SpinQuery.condition(()=>dq(".bilibili-player-area"),i=>i!==null&&unsafeWindow.$(".bilibili-player-video").data("events"));if(i===null){return}const e="double-click-fullscreen";if(!i.classList.contains(e)){i.classList.add(e);const l=unsafeWindow.$(".bilibili-player-video");const n=settings.doubleClickFullscreenPreventSingleClick?l.data("events").click[0].handler:()=>{};const s=new DoubleClickEvent(()=>dq(".bilibili-player-video-btn-fullscreen").click(),i=>n(i));if(settings.doubleClickFullscreenPreventSingleClick){l.unbind("click")}s.bind(l[0])}})})();