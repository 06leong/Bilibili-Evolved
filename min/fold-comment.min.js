(()=>{return(e,t)=>{(async()=>{if(document.URL.replace(window.location.search,"")!=="https://t.bilibili.com/"&&!document.URL.startsWith("https://space.bilibili.com")){return}const{feedsCardsManager:e}=await t.importAsync("feeds-apis");const n=await e.startWatching();if(!n){console.error("feedsCardsManager.startWatching() failed");return}t.applyImportantStyle("foldCommentStyle");const r=e=>{const t=t=>{const n=document.createElement("div");n.classList.add("fold-comment");n.innerHTML="收起评论";const r=t.querySelector(".bb-comment");if(r===null){console.error("未找到评论区");return}else if(r.querySelector(".fold-comment")!==null){return}else{n.addEventListener("click",()=>{const t=e.querySelector(".button-bar").children[1];if(t!==null){t.click();e.scrollIntoView()}});r.insertAdjacentElement("beforeend",n)}};const n=e.querySelector(".panel-area");if(n===null){console.log(e)}if(n.childElementCount===0){const e=Observer.childList(n,r=>{if(r.length>0){t(n);e.forEach(e=>e.stop())}})}else{t(n)}};e.cards.forEach(e=>r(e.element));e.addEventListener("addCard",e=>r(e.detail.element))})()}})();