(()=>{return(e,t)=>{(async()=>{if(document.URL.replace(location.search,"")!=="https://t.bilibili.com/"){return}const e=await SpinQuery.select(".live-up-list");t.applyStyle("extendFeedsLiveStyle");const i=24;const n=await Ajax.getPages({api:e=>{return Ajax.getJsonWithCredentials(`https://api.live.bilibili.com/relation/v1/feed/feed_list?page=${e}&pagesize=${i}`)},getList:e=>{return _.get(e,"data.list",[])},getTotal:e=>{return _.get(e,"data.results",0)}});const a=dqa(e,".up-name");const l=a.map(e=>e.innerText.trim());const s=n.filter(e=>l.includes(e.uname));const o=n.filter(e=>!l.includes(e.uname));a.forEach((e,t)=>{const i=s.find(e=>e.uname===l[t]);if(i===undefined){console.warn(`live title not found for ${l[t]}`)}else{e.parentElement.setAttribute("data-live-title",i.title)}});const r=e.children[0];o.forEach(t=>{const i=r.cloneNode(true);dqa(i,"a[href]").forEach(e=>e.setAttribute("href",`https://live.bilibili.com/${t.roomid}`));const n=dq(i,".live-up-img");n.style.backgroundImage=`url(${t.face})`;const a=dq(i,".live-detail");a.setAttribute("data-live-title",t.title);const l=dq(i,".up-name");l.innerHTML=t.uname;e.insertAdjacentElement("beforeend",i)});console.log(s,o)})()}})();