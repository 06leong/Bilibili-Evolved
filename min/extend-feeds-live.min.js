(()=>{return(e,t)=>{(async()=>{if(document.URL.replace(location.search,"")!=="https://t.bilibili.com/"){return}const e=await SpinQuery.select(".live-up-list");t.applyStyle("extendFeedsLiveStyle");const i=await Ajax.getJsonWithCredentials(`https://api.live.bilibili.com/relation/v1/feed/feed_list?page=1&pagesize=24`);if(i.code!==0){logError(`加载直播列表失败: ${i.message}`);return}const n=_.get(i,"data.list",[]);const l=dqa(e,".up-name");const a=l.map(e=>e.innerText.trim());const o=n.filter(e=>a.includes(e.uname));const r=n.filter(e=>!a.includes(e.uname));l.forEach((e,t)=>{e.parentElement.setAttribute("data-live-title",o.find(e=>e.uname===a[t]).title)});const s=e.children[0];r.forEach(t=>{const i=s.cloneNode(true);dqa(i,"a[href]").forEach(e=>e.setAttribute("href",`https://live.bilibili.com/${t.roomid}`));const n=dq(i,".live-up-img");n.style.backgroundImage=`url(${t.face})`;const l=dq(i,".live-detail");l.setAttribute("data-live-title",t.title);const a=dq(i,".up-name");a.innerHTML=t.uname;e.insertAdjacentElement("beforeend",i)});console.log(o,r)})()}})();