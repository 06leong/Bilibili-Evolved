(()=>{return(e,t)=>{(async()=>{if(document.URL.replace(location.search,"")!=="https://t.bilibili.com/"){return}const e=await SpinQuery.select(".live-up-list");if(e===null){return}t.applyStyle("extendFeedsLiveStyle");const i=24;const n=await Ajax.getPages({api:e=>{return Ajax.getJsonWithCredentials(`https://api.live.bilibili.com/relation/v1/feed/feed_list?page=${e}&pagesize=${i}`)},getList:e=>{return _.get(e,"data.list",[])},getTotal:e=>{return _.get(e,"data.results",0)}});const l=dqa(e,".up-name");const a=l.map(e=>e.innerText.trim());const r=n.filter(e=>a.includes(e.uname));const s=n.filter(e=>!a.includes(e.uname));l.forEach((e,t)=>{const i=r.find(e=>e.uname===a[t]);if(i===undefined){console.warn(`live title not found for ${a[t]}`)}else{e.parentElement.setAttribute("data-live-title",i.title);e.parentElement.setAttribute("title",i.title);e.setAttribute("title",a[t])}});const o=e.children[0];s.forEach(t=>{const i=o.cloneNode(true);dqa(i,"a[href]").forEach(e=>e.setAttribute("href",`https://live.bilibili.com/${t.roomid}`));const n=dq(i,".live-up-img");n.style.backgroundImage=`url(${t.face})`;const l=dq(i,".live-detail");l.setAttribute("data-live-title",t.title);const a=dq(i,".up-name");a.innerHTML=t.uname;a.title=t.uname;e.insertAdjacentElement("beforeend",i)});const{disableProfilePopup:c}=await t.importAsync("disable-profile-popup");c();console.log(r,s)})()}})();